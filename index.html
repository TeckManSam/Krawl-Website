<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Site Revamp</title>
  </head>
  <body>
    Site Revamp
    <br>
    <br>
    Servers:
    <br>
    Factorio - krawl.uk (extra resources)
    <br>
    Factorio - krawl.uk:34198 (no dlc)
    <br>
    Factorio - krawl.uk:34199
    <br>
    Factorio - krawl.uk:34200
    <br>
    Pirates, Vikings, and Knights - krawl.uk:27080
    <br>
    Pirates Vikings & Knights II - krawl.uk:27023
    <br>
    Air Buccaneers - krawl.uk:25002
    <br>
    Minecraft Java - mc.krawl.uk
    <br>
    Minecraft Bedrock - mc.krawl.uk 19132
    <br>
    <a href="https://mc.krawl.uk">Minecraft Map</a>
    <br>
    Team Fortress 2 - 27015-27022, 27024-27035, 27035-27071 (61 Servers)
    <br>
    Farming Simulator 2013 - krawl.uk
    <br>
    Garry's Mod Trouble in Terrorist Town <B>SOON</B>
    <br>
    Garry's Mod Prophunt <B>SOON</B>
    <br>
    Garry's Mod Murder <B>SOON</B>
    <br>
    Just Cause 2 Multiplayer Mod <b>SOON</b>
    <br>
    Unturned <b>SOON</b>
    <br>
    Valheim <b>SOON</b>
    <br>
    <a href="https://discord.gg/GSsCRG55P6">Discord Link</a>
    <br>
    <br>

    
<span style="color: green;">LIVE</span><br>
<span id="ram"></span><br>
<span id="cpu"></span><br>
<span id="gameservers"></span>

<script>
async function updateStats() {
  // Fetch system stats
  const res = await fetch("https://krawl.uk/stats");
  const data = await res.json();

  document.getElementById("cpu").innerText =
    `Server CPU Usage: ${data.cpu_percent}%`;

  document.getElementById("ram").innerText =
    `Server RAM Usage: ${data.ram.used} GB / ${data.ram.total} GB (${data.ram.percent}%)`;

  // Fetch multiple game server stats
  const serverRes = await fetch("https://krawl.uk/serverstats");
  const serverData = await serverRes.json();

  if (Array.isArray(serverData)) {
    let html = "";
    serverData.forEach(s => {
  const status = s.online ? "ONLINE" : "OFFLINE";
  const color = s.online ? "green" : "red";

  if (s.error) {
    html += `<div><span style="color:${color}">${status}</span> - ${s.server_name || "Unknown"} (${s.ip}:${s.port}): ${s.error}</div>`;
  } else {
    let mapPart = s.map ? ` | Map: ${s.map}` : "";
    let timePart = s.game_time_elapsed ? ` | Time Elapsed: ${s.game_time_elapsed}` : "";

    // highlight if players online
    let playerHighlight = s.players > 0 ? "font-weight:bold; color:#4F72F1;" : "";

    html += `<div style="${playerHighlight}"><span style="color:${color}">${status}</span> - ${s.server_name} (${s.ip}:${s.port})${mapPart} | Players: ${s.players}/${s.max_players}${timePart}</div>`;
  }
});
    document.getElementById("gameservers").innerHTML = html;
  }
}
setInterval(updateStats, 10000);
updateStats();
</script>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
  </body>
</html>
